/* ===== TEMA FUTURISTA CLARO + FIX: header en columna (sin solaparse) ===== */
:root{
  --sidebar-w: 280px;

  /* Base clara */
  --fx-bg: #F6FAFF;
  --fx-panel: #FFFFFF;
  --fx-line: rgba(28,45,64,0.12);

  /* Tipografía */
  --fx-text: #1F2A37;
  --fx-muted: #5B6B7C;

  /* Acentos pastel */
  --fx-cyan: #49D7E6;
  --fx-lilac: #A78BFA;
  --fx-mint: #46F0C1;
  --fx-coral: #FF6B8A;

  /* Compat */
  --brand-700: var(--fx-panel);
  --brand-300: var(--fx-mint);
  --brand-200: #B3E9FF;
  --text-100: var(--fx-text);
  --text-300: #334155;
  --muted: rgba(31,42,55,0.55);
  --active-bg: rgba(167,139,250,0.18);
  --hover-bg: rgba(73,215,230,0.14);
  --badge-bg: var(--fx-coral);

  --radius: 12px;
  --panel-shadow: 0 8px 24px rgba(15, 23, 42, 0.08), 0 0 0 1px rgba(28,45,64,0.04);
  --panel-blur: blur(8px) saturate(120%);
}

/* Layout general */
.app-container { display:flex; flex-direction:column; min-height:100vh; }
.content-layout {
  flex:1; display:flex; flex-direction:row;
  background: radial-gradient(1200px 700px at -10% -20%, rgba(73,215,230,0.22), transparent 50%),
              radial-gradient(900px 600px at 115% 110%, rgba(167,139,250,0.20), transparent 55%),
              var(--fx-bg);
}
.main-content { flex:1; padding:2rem; background:transparent; overflow-y:auto; color:var(--fx-text); }

/* MenuBar */
.menu-bar{
  width: var(--sidebar-w);
  color: var(--fx-text);
  flex-shrink: 0;
  display: flex; flex-direction: column;
  padding: 14px 14px 18px;
  background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.55)), var(--brand-700);
  border-right: 1px solid var(--fx-line);
  box-shadow: var(--panel-shadow);
  backdrop-filter: var(--panel-blur);
  -webkit-backdrop-filter: var(--panel-blur);
  height: auto;
  overflow-y: auto;
}

/* === Header del menú: columna (toggle -> brand -> search) === */
.menu-header{
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 0 2px 12px 2px;
  border-bottom: 1px solid rgba(28,45,64,0.10);
  margin-bottom: 12px;
}
.menu-header > *{
  flex: 0 0 auto;      /* nada se estira sobre otro */
  min-height: 0;       /* evita desbordes raros */
}

/* Botón de colapso (blindajes anti-solape) */
.menu-toggle{
  position: static !important;
  float: none !important;
  z-index: auto !important;

  display: inline-flex; align-items: center; gap: 8px;
  border: 1px solid var(--fx-line);
  background: linear-gradient(180deg, #FFFFFF, #F7FAFE);
  color: var(--fx-text);
  border-radius: 10px; padding: 8px 10px; cursor: pointer;
  box-shadow: 0 2px 10px rgba(5,13,25,0.05);
  transition: transform .12s ease, box-shadow .18s ease, border-color .18s ease;
  white-space: nowrap;
  align-self: flex-start;   /* queda alineado a la izquierda, con su propia fila */
  margin: 0;
}
.menu-toggle:hover{
  border-color: rgba(73,215,230,0.5);
  box-shadow: 0 4px 14px rgba(73,215,230,0.18);
  transform: translateY(-1px);
}
.menu-toggle .toggle-text{ font-weight: 600; font-size: 13px; color: var(--fx-muted); }

/* Marca */
.menu-brand{ display:flex; align-items:center; gap:10px; min-width:0; }
.brand-dot{
  width: 12px; height: 12px; border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, var(--fx-mint), var(--fx-cyan));
  box-shadow: 0 0 0 3px rgba(70,240,193,0.20), 0 0 12px rgba(73,215,230,0.35);
  flex: 0 0 12px;
}
.brand-text{
  font-size: 12px; font-weight: 800; letter-spacing: .32px; text-transform: uppercase; color: #3B4A5A;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}

/* Buscador (ocupa su propia fila, debajo) */
.menu-search{
  display: flex; align-items: center; gap: 10px;
  background: linear-gradient(180deg, #FFFFFF, #F7FAFE);
  padding: 10px 12px; border-radius: 10px;
  border: 1px solid var(--fx-line);
  box-shadow: inset 0 0 0 1px rgba(73,215,230,0.12);
}
.menu-search .search-icon{ color: #5BB9C4; font-size: 18px; flex: 0 0 auto; }
.menu-search input{
  border: none; outline: none; background: transparent;
  color: var(--fx-text); flex: 1; font-size: 14px; min-width: 0;
}
.menu-search input::placeholder{ color: var(--fx-muted); }
.menu-search:focus-within{
  box-shadow: inset 0 0 0 1px rgba(73,215,230,0.28), 0 0 0 3px rgba(73,215,230,0.18);
  border-color: rgba(73,215,230,0.45);
}

/* Secciones */
.menu-section { margin: 8px 0; }
.section-title{
  width:100%; background:none; border:none; color:#3B4A5A; text-align:left;
  font-weight: 800; font-size: 11px; letter-spacing:.42px; text-transform:uppercase;
  display:flex; justify-content:space-between; align-items:center;
  cursor:pointer; padding:10px 6px; border-radius:8px;
  transition: color .2s ease, transform .12s ease, background .2s ease;
}
.section-title .icon{ color:#6C7A88; }
.section-title .chev{ transition: transform .25s ease, color .2s ease; color:#8CA2B3; }
.section-title .chev.open{ transform: rotate(180deg); }
.section-title:hover{ color:#1F2A37; background: rgba(73,215,230,0.10); }

/* Lista colapsable */
.section-items{
  list-style:none; padding-left:16px; margin:0;
  display:none; transition:max-height .3s ease-out; max-height:0; overflow:hidden;
  border-left: 2px solid rgba(167,139,250,0.28);
}
.section-items.open{ display:block; max-height: 680px; }

/* Links */
.menu-link{
  display:flex; align-items:center; gap:12px;
  padding:9px 8px; margin:4px 2px;
  color:#415362; text-decoration:none;
  border-radius:10px;
  transition: background-color .18s ease, color .18s ease, transform .12s ease, box-shadow .18s ease, border-color .18s ease;
  font-size:.96rem; border:1px solid transparent; position:relative;
}
.menu-link .icon{ font-size:1.05rem; color:#6C7A88; }
.menu-link:hover{
  background: linear-gradient(90deg, rgba(73,215,230,0.16), rgba(167,139,250,0.16));
  color:#0B1320;
  box-shadow: 0 2px 10px rgba(73,215,230,0.12), 0 0 0 1px rgba(28,45,64,0.06);
  transform: translateX(2px);
}
.menu-link.active{
  background: linear-gradient(90deg, rgba(167,139,250,0.22), rgba(73,215,230,0.22));
  color:#0B1320; font-weight:800;
  border-color: rgba(28,45,64,0.14);
  box-shadow: 0 0 0 1px rgba(167,139,250,0.20);
}
.menu-link.active::before{
  content:""; position:absolute; left:-2px; top:8px; bottom:8px; width:3px;
  background: linear-gradient(180deg, var(--fx-cyan), var(--fx-lilac)); border-radius:2px;
}

/* Badges */
.badge{
  margin-left:auto; background: linear-gradient(180deg, var(--fx-coral), #ff88a2);
  color:#fff; font-size:.72rem; padding:.18rem .6rem; border-radius:999px;
  font-weight:800; min-width:26px; text-align:center;
  box-shadow: 0 0 0 2px rgba(255,107,138,0.20);
}

/* Matices por sección (opcionales) */
.menu-section[data-section="biblioteca"] .menu-link .icon { color: #8B6FF4; }
.menu-section[data-section="simulador"]  .menu-link .icon { color: #37C9BE; }
.menu-section[data-section="evaluaciones"] .menu-link .icon { color: #3AA1D8; }
.menu-section[data-section="colaboracion"] .menu-link .icon { color: #36C88E; }
.menu-section[data-section="reportes"] .menu-link .icon { color: #3A7DFF; }
.menu-section[data-section="ayuda"] .menu-link .icon { color: #A3AEC0; }

/* Colapso (íconos-solo) */
.menu-bar.is-collapsed{
  --sidebar-w: 64px;
  padding: 12px 8px;
}
.menu-bar.is-collapsed .menu-header{
  /* en colapsado, solo el botón (y NO se superpone) */
  flex-direction: row;
  gap: 0;
  padding-bottom: 8px;
}
.menu-bar.is-collapsed .toggle-text,
.menu-bar.is-collapsed .menu-search,
.menu-bar.is-collapsed .brand-text,
.menu-bar.is-collapsed .title-text,
.menu-bar.is-collapsed .section-items{
  display: none !important;
}
.menu-bar.is-collapsed .section-title{ justify-content: center; padding: 8px 0; }
.menu-bar.is-collapsed .section-title .icon{ color:#7B8896; }
.menu-bar.is-collapsed .menu-link{ justify-content: center; padding: 10px 8px; margin: 6px 2px; }
.menu-bar.is-collapsed .menu-link .label{ display: none; }
.menu-bar.is-collapsed .badge{ position:absolute; right:6px; top:4px; }

/* Scrollbar */
.menu-bar::-webkit-scrollbar,
.menu-sections::-webkit-scrollbar{ width:10px; }
.menu-bar::-webkit-scrollbar-thumb,
.menu-sections::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(73,215,230,0.5), rgba(167,139,250,0.5));
  border-radius:10px; border:2px solid rgba(255,255,255,0.6);
}
.menu-bar::-webkit-scrollbar-track,
.menu-sections::-webkit-scrollbar-track{ background: rgba(0,0,0,0.04); border-radius:10px; }

/* Accesibilidad */
.menu-link:focus-visible,
.section-title:focus-visible,
.menu-toggle:focus-visible{
  outline: 2px solid rgba(73,215,230,0.65);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(73,215,230,0.18);
}

/* Responsive */
@media (max-width: 980px){
  :root { --sidebar-w: 248px; }
}
@media (max-width: 720px){
  .content-layout { flex-direction: column; }
  .menu-bar { width: 100%; border-right: none; border-bottom: 1px solid var(--fx-line); }
  .menu-bar.is-collapsed { --sidebar-w: 0px; width: 100%; }
}
